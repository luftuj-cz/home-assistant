{
  "id": "modbus-xvent",
  "capabilities": {
    "hasPowerControl": true,
    "hasTemperatureControl": false,
    "hasModeControl": false
  },
  "powerCommands": {
    "read": [
      {
        "type": "assignment",
        "variable": "$power",
        "value": {
          "function": "bit_and",
          "args": [
            {
              "function": "bit_rshift",
              "args": [{ "function": "modbus_read_holding", "args": ["0x9C40"] }, 6]
            },
            "0xF"
          ]
        }
      }
    ],
    "write": [
      {
        "type": "action",
        "expression": {
          "function": "modbus_write_holding_multi",
          "args": [
            "0x9C40",
            {
              "function": "bit_or",
              "args": [
                {
                  "function": "bit_and",
                  "args": [{ "function": "modbus_read_holding", "args": ["0x9C40"] }, "0xFC3D"]
                },
                {
                  "function": "bit_or",
                  "args": [{ "function": "bit_lshift", "args": ["$power", 6] }, "0x1"]
                }
              ]
            }
          ]
        }
      }
    ]
  }
}
