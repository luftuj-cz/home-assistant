{
  "id": "modbus-atrea-am-cf",
  "capabilities": {
    "hasPowerControl": true,
    "hasTemperatureControl": true,
    "hasModeControl": true,
    "powerStep": 10,
    "temperatureStep": 0.1
  },
  "powerCommands": {
    "read": [
      {
        "type": "assignment",
        "variable": "$rawPower",
        "value": { "function": "modbus_read_input", "args": [1005, 1] }
      },
      {
        "type": "assignment",
        "variable": "$power",
        "value": { "function": "multiply", "args": ["$rawPower", 10] }
      }
    ],
    "write": [
      {
        "type": "action",
        "expression": {
          "function": "modbus_write_holding",
          "args": [
            1005,
            {
              "function": "round",
              "args": [{ "function": "multiply", "args": ["$power", 0.1] }]
            }
          ]
        }
      }
    ]
  },
  "temperatureCommands": {
    "read": [
      {
        "type": "assignment",
        "variable": "$rawTemp",
        "value": { "function": "modbus_read_input", "args": [1002, 1] }
      },
      {
        "type": "assignment",
        "variable": "$temperature",
        "value": { "function": "multiply", "args": ["$rawTemp", 0.1] }
      }
    ],
    "write": [
      {
        "type": "action",
        "expression": {
          "function": "modbus_write_holding",
          "args": [
            1002,
            {
              "function": "round",
              "args": [{ "function": "multiply", "args": ["$temperature", 10] }]
            }
          ]
        }
      }
    ]
  },
  "modeCommands": {
    "read": [
      {
        "type": "assignment",
        "variable": "$mode",
        "value": { "function": "modbus_read_input", "args": [1001, 1] }
      }
    ],
    "write": [
      {
        "type": "action",
        "expression": { "function": "modbus_write_holding", "args": [1001, "$mode"] }
      }
    ],
    "availableModes": {
      "0": "Vypnuto",
      "2": "Větrání",
      "5": "Noční předchlazení",
      "6": "Rozvážení",
      "7": "Přetlak"
    }
  }
}
