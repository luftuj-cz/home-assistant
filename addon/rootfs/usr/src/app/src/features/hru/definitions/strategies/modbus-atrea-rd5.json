{
  "id": "atrea-rd5",
  "capabilities": {
    "hasPowerControl": true,
    "hasTemperatureControl": true,
    "hasModeControl": true
  },
  "powerCommands": {
    "read": [
      {
        "type": "assignment",
        "variable": "$power",
        "value": {
          "function": "modbus_read_holding",
          "args": [10704, 1]
        }
      }
    ],
    "write": [
      {
        "type": "action",
        "expression": { "function": "modbus_write_holding", "args": [10700, 0] }
      },
      {
        "type": "action",
        "expression": { "function": "delay", "args": [100] }
      },
      {
        "type": "action",
        "expression": {
          "function": "modbus_write_holding",
          "args": [10708, "$power"]
        }
      }
    ]
  },
  "temperatureCommands": {
    "read": [
      {
        "type": "assignment",
        "variable": "$rawTemp",
        "value": { "function": "modbus_read_holding", "args": [10706, 1] }
      },
      {
        "type": "assignment",
        "variable": "$temperature",
        "value": { "function": "multiply", "args": ["$rawTemp", 0.1] }
      }
    ],
    "write": [
      {
        "type": "action",
        "expression": { "function": "modbus_write_holding", "args": [10702, 0] }
      },
      {
        "type": "action",
        "expression": { "function": "delay", "args": [100] }
      },
      {
        "type": "action",
        "expression": {
          "function": "modbus_write_holding",
          "args": [
            10710,
            {
              "function": "round",
              "args": [{ "function": "multiply", "args": ["$temperature", 10] }]
            }
          ]
        }
      }
    ]
  },
  "modeCommands": {
    "read": [
      {
        "type": "assignment",
        "variable": "$mode",
        "value": {
          "function": "modbus_read_holding",
          "args": [10705, 1]
        }
      }
    ],
    "write": [
      {
        "type": "action",
        "expression": { "function": "modbus_write_holding", "args": [10701, 0] }
      },
      {
        "type": "action",
        "expression": { "function": "delay", "args": [100] }
      },
      {
        "type": "action",
        "expression": {
          "function": "modbus_write_holding",
          "args": [10709, "$mode"]
        }
      }
    ],
    "availableModes": {
      "0": "Vypnuto",
      "1": "Automat",
      "2": "Větrání",
      "3": "Cirkulace s větráním",
      "4": "Cirkulace",
      "5": "Noční předchlazení",
      "6": "Rozvážení",
      "7": "Přetlak"
    }
  }
}
